---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
import ThemeToggle from './ThemeToggle.astro';
import Logo from './Logo.astro';
import MobileMenu from './MobileMenu.astro';
import MegaMenu from './MegaMenu.astro';
import SearchBar from './SearchBar.astro';
---

<header id="main-header" class="header">
	<nav class="nav-container">
		<!-- Logo (start position) -->
		<div class="logo-container">
			<a href="/" class="logo-link">
				<Logo width="180" height="50" />
			</a>
		</div>

		<!-- Search Bar (center) -->
		<div class="search-container">
			<SearchBar />
		</div>

		<!-- Categories Navigation and Theme Toggle (end position) -->
		<div class="categories-nav">
			<MegaMenu />
			<ThemeToggle />
		</div>

		<!-- Mobile hamburger menu -->
		<button id="hamburger-menu" class="hamburger-btn" aria-label="Open menu">
			<svg class="hamburger-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
				<line x1="3" y1="6" x2="21" y2="6"></line>
				<line x1="3" y1="12" x2="21" y2="12"></line>
				<line x1="3" y1="18" x2="21" y2="18"></line>
			</svg>
		</button>
	</nav>
</header>

<!-- Mobile Menu Component -->
<MobileMenu />
<style>
	.header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 1000;
		background: var(--bg-color);
		border-bottom: 1px solid var(--border-color);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		backdrop-filter: blur(12px);
		-webkit-backdrop-filter: blur(12px);
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
	}

	.header.scrolled {
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
		background: rgba(var(--bg-color-rgb), 0.95);
	}

	/* Add padding to body to account for fixed header */
	:global(body) {
		padding-top: 80px;
	}
	.nav-container {
		display: grid;
		grid-template-columns: auto 1fr auto;
		align-items: center;
		max-width: 1400px;
		margin: 0 auto;
		padding: 1rem 2rem;
		width: 100%;
		position: relative;
		gap: 2rem;
	}

	.logo-container {
		display: flex;
		align-items: center;
		grid-column: 1;
	}

	.logo-link {
		text-decoration: none;
		display: block;
		transition: transform 0.2s ease;
	}

	.logo-link:hover {
		transform: scale(1.02);
	}

	/* Hamburger Menu */
	.hamburger-btn {
		display: none;
		align-items: center;
		justify-content: center;
		width: 44px;
		height: 44px;
		background: none;
		border: none;
		cursor: pointer;
		padding: 10px;
		border-radius: 8px;
		transition: all 0.2s ease;
		color: var(--text-color);
	}

	.hamburger-btn:hover {
		background-color: var(--accent-light);
		color: var(--accent);
	}

	.hamburger-icon {
		transition: all 0.2s ease;
	}

	.search-container {
		display: flex;
		align-items: center;
		justify-content: center;
		grid-column: 2;
		width: 100%;
		max-width: 600px;
		margin: 0 auto;
	}

	.categories-nav {
		display: flex;
		align-items: center;
		grid-column: 3;
		justify-content: flex-end;
		gap: 1rem;
	}




	
	/* Mobile Styles */
	@media (max-width: 768px) {
		:global(body) {
			padding-top: 90px;
		}

		.nav-container {
			grid-template-columns: auto auto 1fr auto;
			grid-template-rows: auto;
			padding: 1rem;
			gap: 0.5rem;
			align-items: center;
		}

		.logo-container {
			grid-column: 4;
			grid-row: 1;
			justify-self: end;
		}

		.search-container {
			grid-column: 3;
			grid-row: 1;
			justify-self: center;
			width: 100%;
			max-width: 200px;
		}

		.categories-nav {
			display: none;
		}

		.hamburger-btn {
			display: flex;
			grid-column: 1;
			grid-row: 1;
			justify-self: start;
			position: relative;
			left: 0;
			top: 0;
			z-index: 10;
		}

		.theme-toggle {
			display: flex;
			grid-column: 2;
			grid-row: 1;
			justify-self: start;
		}
	}

	@media (max-width: 480px) {
		.logo-container {
			max-width: 140px;
		}
	}
</style>
