---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
import ThemeToggle from './ThemeToggle.astro';
import Logo from './Logo.astro';
import MobileMenu from './MobileMenu.astro';
import MegaMenu from './MegaMenu.astro';
---

<header id="main-header" class="header">
	<nav class="nav-container">
		<!-- Mobile hamburger menu -->
		<button id="hamburger-menu" class="hamburger-btn" aria-label="Open menu">
			<svg class="hamburger-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
				<line x1="3" y1="6" x2="21" y2="6"></line>
				<line x1="3" y1="12" x2="21" y2="12"></line>
				<line x1="3" y1="18" x2="21" y2="18"></line>
			</svg>
		</button>

		<!-- Desktop navigation with mega menu -->
		<div class="desktop-nav">
			<MegaMenu />
		</div>

		<!-- Logo (centered) -->
		<div class="logo-container">
			<a href="/" class="logo-link">
				<Logo width="180" height="50" />
			</a>
		</div>

		<!-- Header actions -->
		<div class="header-actions">
			<ThemeToggle />
		</div>
	</nav>
</header>

<!-- Mobile Menu Component -->
<MobileMenu />
<style>
	.header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 1000;
		background: var(--bg-color);
		border-bottom: 1px solid var(--border-color);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		backdrop-filter: blur(12px);
		-webkit-backdrop-filter: blur(12px);
		box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
	}

	.header.scrolled {
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
		background: rgba(var(--bg-color-rgb), 0.95);
	}

	/* Add padding to body to account for fixed header */
	:global(body) {
		padding-top: 80px;
	}
	.nav-container {
		display: flex;
		align-items: center;
		justify-content: space-between;
		max-width: 1400px;
		margin: 0 auto;
		padding: 1rem 2rem;
		width: 100%;
		position: relative;
	}

	.logo-container {
		display: flex;
		align-items: center;
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
		z-index: 10;
	}

	.logo-link {
		text-decoration: none;
		display: block;
		transition: transform 0.2s ease;
	}

	.logo-link:hover {
		transform: scale(1.02);
	}

	/* Hamburger Menu */
	.hamburger-btn {
		display: none;
		align-items: center;
		justify-content: center;
		width: 44px;
		height: 44px;
		background: none;
		border: none;
		cursor: pointer;
		padding: 10px;
		border-radius: 8px;
		transition: all 0.2s ease;
		color: var(--text-color);
	}

	.hamburger-btn:hover {
		background-color: var(--accent-light);
		color: var(--accent);
	}

	.hamburger-icon {
		transition: all 0.2s ease;
	}

	/* Desktop Navigation */
	.desktop-nav {
		display: flex;
		align-items: center;
		gap: 2rem;
		flex: 1;
		justify-content: flex-start;
	}
	.desktop-nav a {
		padding: 0.75rem 1rem;
		color: var(--text-color);
		border-bottom: 3px solid transparent;
		text-decoration: none;
		transition: all 0.2s ease;
		border-radius: 6px;
		font-weight: 500;
		position: relative;
	}

	.desktop-nav a:hover {
		background-color: var(--accent-light);
		color: var(--accent);
	}

	.desktop-nav a.active {
		text-decoration: none;
		border-bottom-color: var(--accent);
	}
	.header-actions {
		display: flex;
		align-items: center;
		gap: 1rem;
		flex: 1;
		justify-content: flex-end;
	}


	
	/* Mobile Styles */
	@media (max-width: 768px) {
		:global(body) {
			padding-top: 90px;
		}

		.nav-container {
			padding: 1.5rem 1.25rem;
			position: relative;
			min-height: 70px;
		}

		.hamburger-btn {
			display: flex;
			position: absolute;
			left: 1rem;
			top: 50%;
			transform: translateY(-50%);
			z-index: 10;
		}

		.logo-container {
			justify-content: center;
			position: absolute;
			left: 50%;
			transform: translateX(-50%);
		}

		.desktop-nav {
			display: none;
		}

		.header-actions {
			position: absolute;
			right: 1rem;
			top: 50%;
			transform: translateY(-50%);
			flex: none;
			justify-content: flex-end;
		}
	}

	@media (max-width: 480px) {
		.logo-container {
			max-width: 140px;
		}
	}
</style>
